{"ast":null,"code":"import React,{useState}from'react';import ReactMarkdown from'react-markdown';import{Avatar,AvatarFallback}from'../ui/avatar';import{Button}from'../ui/button';import{User,Bot,ChevronDown,ChevronUp,ExternalLink}from'lucide-react';import{cn}from'../../lib/utils';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const MessageBubble=_ref=>{let{message,isTyping=false}=_ref;const[showSources,setShowSources]=useState(false);const isUser=message.role==='user';return/*#__PURE__*/_jsxs(\"div\",{className:cn(\"flex gap-3 max-w-4xl mx-auto px-4 py-6\",isUser?\"flex-row-reverse\":\"flex-row\"),children:[/*#__PURE__*/_jsx(Avatar,{className:\"w-8 h-8 shrink-0\",children:/*#__PURE__*/_jsx(AvatarFallback,{className:cn(isUser?\"bg-primary text-primary-foreground\":\"bg-secondary\"),children:isUser?/*#__PURE__*/_jsx(User,{className:\"w-4 h-4\"}):/*#__PURE__*/_jsx(Bot,{className:\"w-4 h-4\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:cn(\"flex flex-col gap-2 max-w-[80%]\",isUser?\"items-end\":\"items-start\"),children:[/*#__PURE__*/_jsx(\"div\",{className:cn(\"rounded-lg px-4 py-3 text-sm\",isUser?\"bg-primary text-primary-foreground\":\"bg-muted border\"),children:isTyping?/*#__PURE__*/_jsx(TypingIndicator,{}):/*#__PURE__*/_jsx(ReactMarkdown,{className:\"prose prose-sm max-w-none dark:prose-invert\",components:{p:_ref2=>{let{children}=_ref2;return/*#__PURE__*/_jsx(\"p\",{className:\"mb-2 last:mb-0\",children:children});},code:_ref3=>{let{children}=_ref3;return/*#__PURE__*/_jsx(\"code\",{className:\"bg-muted px-1 py-0.5 rounded text-xs\",children:children});},pre:_ref4=>{let{children}=_ref4;return/*#__PURE__*/_jsx(\"pre\",{className:\"bg-muted p-2 rounded text-xs overflow-x-auto\",children:children});}},children:message.content})}),!isUser&&message.sources&&message.sources.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"w-full\",children:[/*#__PURE__*/_jsxs(Button,{variant:\"ghost\",size:\"sm\",onClick:()=>setShowSources(!showSources),className:\"h-8 px-2 text-xs text-muted-foreground hover:text-foreground\",children:[showSources?/*#__PURE__*/_jsx(ChevronUp,{className:\"w-3 h-3 mr-1\"}):/*#__PURE__*/_jsx(ChevronDown,{className:\"w-3 h-3 mr-1\"}),message.sources.length,\" source\",message.sources.length!==1?'s':'']}),showSources&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 space-y-2\",children:message.sources.map((source,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-muted/50 border rounded-lg p-3 text-xs\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[\"Document \",index+1]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-muted-foreground\",children:[\"Score: \",(source.relevance_score*100).toFixed(1),\"%\"]}),/*#__PURE__*/_jsx(ExternalLink,{className:\"w-3 h-3 text-muted-foreground\"})]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted-foreground mb-2 line-clamp-3\",children:source.content}),source.metadata&&/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-2 flex-wrap\",children:Object.entries(source.metadata).map(_ref5=>{let[key,value]=_ref5;return/*#__PURE__*/_jsxs(\"span\",{className:\"bg-background px-2 py-1 rounded text-xs\",children:[key,\": \",value]},key);})})]},source.document_id))})]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-muted-foreground\",children:message.timestamp.toLocaleTimeString()})]})]});};const TypingIndicator=()=>{return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-current rounded-full animate-typing\",style:{animationDelay:'0ms'}}),/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-current rounded-full animate-typing\",style:{animationDelay:'150ms'}}),/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-current rounded-full animate-typing\",style:{animationDelay:'300ms'}})]}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-muted-foreground\",children:\"Wexa co-worker is processing...\"})]});};","map":{"version":3,"names":["React","useState","ReactMarkdown","Avatar","AvatarFallback","Button","User","Bot","ChevronDown","ChevronUp","ExternalLink","cn","jsx","_jsx","jsxs","_jsxs","MessageBubble","_ref","message","isTyping","showSources","setShowSources","isUser","role","className","children","TypingIndicator","components","p","_ref2","code","_ref3","pre","_ref4","content","sources","length","variant","size","onClick","map","source","index","relevance_score","toFixed","metadata","Object","entries","_ref5","key","value","document_id","timestamp","toLocaleTimeString","style","animationDelay"],"sources":["C:/Users/ashwi/OneDrive/Desktop/LightRiver UI/src/components/chat/MessageBubble.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport { Avatar, AvatarFallback } from '../ui/avatar';\nimport { Button } from '../ui/button';\nimport { Message } from '../../types';\nimport { User, Bot, ChevronDown, ChevronUp, ExternalLink } from 'lucide-react';\nimport { cn } from '../../lib/utils';\n\ninterface MessageBubbleProps {\n  message: Message;\n  isTyping?: boolean;\n}\n\nexport const MessageBubble: React.FC<MessageBubbleProps> = ({ message, isTyping = false }) => {\n  const [showSources, setShowSources] = useState(false);\n  const isUser = message.role === 'user';\n\n  return (\n    <div className={cn(\n      \"flex gap-3 max-w-4xl mx-auto px-4 py-6\",\n      isUser ? \"flex-row-reverse\" : \"flex-row\"\n    )}>\n      <Avatar className=\"w-8 h-8 shrink-0\">\n        <AvatarFallback className={cn(\n          isUser ? \"bg-primary text-primary-foreground\" : \"bg-secondary\"\n        )}>\n          {isUser ? <User className=\"w-4 h-4\" /> : <Bot className=\"w-4 h-4\" />}\n        </AvatarFallback>\n      </Avatar>\n\n      <div className={cn(\n        \"flex flex-col gap-2 max-w-[80%]\",\n        isUser ? \"items-end\" : \"items-start\"\n      )}>\n        <div className={cn(\n          \"rounded-lg px-4 py-3 text-sm\",\n          isUser \n            ? \"bg-primary text-primary-foreground\" \n            : \"bg-muted border\"\n        )}>\n          {isTyping ? (\n            <TypingIndicator />\n          ) : (\n            <ReactMarkdown \n              className=\"prose prose-sm max-w-none dark:prose-invert\"\n              components={{\n                p: ({ children }) => <p className=\"mb-2 last:mb-0\">{children}</p>,\n                code: ({ children }) => (\n                  <code className=\"bg-muted px-1 py-0.5 rounded text-xs\">{children}</code>\n                ),\n                pre: ({ children }) => (\n                  <pre className=\"bg-muted p-2 rounded text-xs overflow-x-auto\">{children}</pre>\n                ),\n              }}\n            >\n              {message.content}\n            </ReactMarkdown>\n          )}\n        </div>\n\n        {!isUser && message.sources && message.sources.length > 0 && (\n          <div className=\"w-full\">\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={() => setShowSources(!showSources)}\n              className=\"h-8 px-2 text-xs text-muted-foreground hover:text-foreground\"\n            >\n              {showSources ? <ChevronUp className=\"w-3 h-3 mr-1\" /> : <ChevronDown className=\"w-3 h-3 mr-1\" />}\n              {message.sources.length} source{message.sources.length !== 1 ? 's' : ''}\n            </Button>\n\n            {showSources && (\n              <div className=\"mt-2 space-y-2\">\n                {message.sources.map((source, index) => (\n                  <div key={source.document_id} className=\"bg-muted/50 border rounded-lg p-3 text-xs\">\n                    <div className=\"flex items-center justify-between mb-2\">\n                      <span className=\"font-medium\">Document {index + 1}</span>\n                      <div className=\"flex items-center gap-2\">\n                        <span className=\"text-muted-foreground\">\n                          Score: {(source.relevance_score * 100).toFixed(1)}%\n                        </span>\n                        <ExternalLink className=\"w-3 h-3 text-muted-foreground\" />\n                      </div>\n                    </div>\n                    <p className=\"text-muted-foreground mb-2 line-clamp-3\">\n                      {source.content}\n                    </p>\n                    {source.metadata && (\n                      <div className=\"flex gap-2 flex-wrap\">\n                        {Object.entries(source.metadata).map(([key, value]) => (\n                          <span key={key} className=\"bg-background px-2 py-1 rounded text-xs\">\n                            {key}: {value}\n                          </span>\n                        ))}\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n\n        <span className=\"text-xs text-muted-foreground\">\n          {message.timestamp.toLocaleTimeString()}\n        </span>\n      </div>\n    </div>\n  );\n};\n\nconst TypingIndicator: React.FC = () => {\n  return (\n    <div className=\"flex items-center gap-1\">\n      <div className=\"flex gap-1\">\n        <div className=\"w-2 h-2 bg-current rounded-full animate-typing\" style={{ animationDelay: '0ms' }} />\n        <div className=\"w-2 h-2 bg-current rounded-full animate-typing\" style={{ animationDelay: '150ms' }} />\n        <div className=\"w-2 h-2 bg-current rounded-full animate-typing\" style={{ animationDelay: '300ms' }} />\n      </div>\n      <span className=\"ml-2 text-muted-foreground\">Wexa co-worker is processing...</span>\n    </div>\n  );\n};\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAO,CAAAC,aAAa,KAAM,gBAAgB,CAC1C,OAASC,MAAM,CAAEC,cAAc,KAAQ,cAAc,CACrD,OAASC,MAAM,KAAQ,cAAc,CAErC,OAASC,IAAI,CAAEC,GAAG,CAAEC,WAAW,CAAEC,SAAS,CAAEC,YAAY,KAAQ,cAAc,CAC9E,OAASC,EAAE,KAAQ,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAOrC,MAAO,MAAM,CAAAC,aAA2C,CAAGC,IAAA,EAAmC,IAAlC,CAAEC,OAAO,CAAEC,QAAQ,CAAG,KAAM,CAAC,CAAAF,IAAA,CACvF,KAAM,CAACG,WAAW,CAAEC,cAAc,CAAC,CAAGpB,QAAQ,CAAC,KAAK,CAAC,CACrD,KAAM,CAAAqB,MAAM,CAAGJ,OAAO,CAACK,IAAI,GAAK,MAAM,CAEtC,mBACER,KAAA,QAAKS,SAAS,CAAEb,EAAE,CAChB,wCAAwC,CACxCW,MAAM,CAAG,kBAAkB,CAAG,UAChC,CAAE,CAAAG,QAAA,eACAZ,IAAA,CAACV,MAAM,EAACqB,SAAS,CAAC,kBAAkB,CAAAC,QAAA,cAClCZ,IAAA,CAACT,cAAc,EAACoB,SAAS,CAAEb,EAAE,CAC3BW,MAAM,CAAG,oCAAoC,CAAG,cAClD,CAAE,CAAAG,QAAA,CACCH,MAAM,cAAGT,IAAA,CAACP,IAAI,EAACkB,SAAS,CAAC,SAAS,CAAE,CAAC,cAAGX,IAAA,CAACN,GAAG,EAACiB,SAAS,CAAC,SAAS,CAAE,CAAC,CACtD,CAAC,CACX,CAAC,cAETT,KAAA,QAAKS,SAAS,CAAEb,EAAE,CAChB,iCAAiC,CACjCW,MAAM,CAAG,WAAW,CAAG,aACzB,CAAE,CAAAG,QAAA,eACAZ,IAAA,QAAKW,SAAS,CAAEb,EAAE,CAChB,8BAA8B,CAC9BW,MAAM,CACF,oCAAoC,CACpC,iBACN,CAAE,CAAAG,QAAA,CACCN,QAAQ,cACPN,IAAA,CAACa,eAAe,GAAE,CAAC,cAEnBb,IAAA,CAACX,aAAa,EACZsB,SAAS,CAAC,6CAA6C,CACvDG,UAAU,CAAE,CACVC,CAAC,CAAEC,KAAA,MAAC,CAAEJ,QAAS,CAAC,CAAAI,KAAA,oBAAKhB,IAAA,MAAGW,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAAEA,QAAQ,CAAI,CAAC,GACjEK,IAAI,CAAEC,KAAA,MAAC,CAAEN,QAAS,CAAC,CAAAM,KAAA,oBACjBlB,IAAA,SAAMW,SAAS,CAAC,sCAAsC,CAAAC,QAAA,CAAEA,QAAQ,CAAO,CAAC,EACzE,CACDO,GAAG,CAAEC,KAAA,MAAC,CAAER,QAAS,CAAC,CAAAQ,KAAA,oBAChBpB,IAAA,QAAKW,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAEA,QAAQ,CAAM,CAAC,EAElF,CAAE,CAAAA,QAAA,CAEDP,OAAO,CAACgB,OAAO,CACH,CAChB,CACE,CAAC,CAEL,CAACZ,MAAM,EAAIJ,OAAO,CAACiB,OAAO,EAAIjB,OAAO,CAACiB,OAAO,CAACC,MAAM,CAAG,CAAC,eACvDrB,KAAA,QAAKS,SAAS,CAAC,QAAQ,CAAAC,QAAA,eACrBV,KAAA,CAACV,MAAM,EACLgC,OAAO,CAAC,OAAO,CACfC,IAAI,CAAC,IAAI,CACTC,OAAO,CAAEA,CAAA,GAAMlB,cAAc,CAAC,CAACD,WAAW,CAAE,CAC5CI,SAAS,CAAC,8DAA8D,CAAAC,QAAA,EAEvEL,WAAW,cAAGP,IAAA,CAACJ,SAAS,EAACe,SAAS,CAAC,cAAc,CAAE,CAAC,cAAGX,IAAA,CAACL,WAAW,EAACgB,SAAS,CAAC,cAAc,CAAE,CAAC,CAC/FN,OAAO,CAACiB,OAAO,CAACC,MAAM,CAAC,SAAO,CAAClB,OAAO,CAACiB,OAAO,CAACC,MAAM,GAAK,CAAC,CAAG,GAAG,CAAG,EAAE,EACjE,CAAC,CAERhB,WAAW,eACVP,IAAA,QAAKW,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAC5BP,OAAO,CAACiB,OAAO,CAACK,GAAG,CAAC,CAACC,MAAM,CAAEC,KAAK,gBACjC3B,KAAA,QAA8BS,SAAS,CAAC,2CAA2C,CAAAC,QAAA,eACjFV,KAAA,QAAKS,SAAS,CAAC,wCAAwC,CAAAC,QAAA,eACrDV,KAAA,SAAMS,SAAS,CAAC,aAAa,CAAAC,QAAA,EAAC,WAAS,CAACiB,KAAK,CAAG,CAAC,EAAO,CAAC,cACzD3B,KAAA,QAAKS,SAAS,CAAC,yBAAyB,CAAAC,QAAA,eACtCV,KAAA,SAAMS,SAAS,CAAC,uBAAuB,CAAAC,QAAA,EAAC,SAC/B,CAAC,CAACgB,MAAM,CAACE,eAAe,CAAG,GAAG,EAAEC,OAAO,CAAC,CAAC,CAAC,CAAC,GACpD,EAAM,CAAC,cACP/B,IAAA,CAACH,YAAY,EAACc,SAAS,CAAC,+BAA+B,CAAE,CAAC,EACvD,CAAC,EACH,CAAC,cACNX,IAAA,MAAGW,SAAS,CAAC,yCAAyC,CAAAC,QAAA,CACnDgB,MAAM,CAACP,OAAO,CACd,CAAC,CACHO,MAAM,CAACI,QAAQ,eACdhC,IAAA,QAAKW,SAAS,CAAC,sBAAsB,CAAAC,QAAA,CAClCqB,MAAM,CAACC,OAAO,CAACN,MAAM,CAACI,QAAQ,CAAC,CAACL,GAAG,CAACQ,KAAA,MAAC,CAACC,GAAG,CAAEC,KAAK,CAAC,CAAAF,KAAA,oBAChDjC,KAAA,SAAgBS,SAAS,CAAC,yCAAyC,CAAAC,QAAA,EAChEwB,GAAG,CAAC,IAAE,CAACC,KAAK,GADJD,GAEL,CAAC,EACR,CAAC,CACC,CACN,GArBOR,MAAM,CAACU,WAsBZ,CACN,CAAC,CACC,CACN,EACE,CACN,cAEDtC,IAAA,SAAMW,SAAS,CAAC,+BAA+B,CAAAC,QAAA,CAC5CP,OAAO,CAACkC,SAAS,CAACC,kBAAkB,CAAC,CAAC,CACnC,CAAC,EACJ,CAAC,EACH,CAAC,CAEV,CAAC,CAED,KAAM,CAAA3B,eAAyB,CAAGA,CAAA,GAAM,CACtC,mBACEX,KAAA,QAAKS,SAAS,CAAC,yBAAyB,CAAAC,QAAA,eACtCV,KAAA,QAAKS,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBZ,IAAA,QAAKW,SAAS,CAAC,gDAAgD,CAAC8B,KAAK,CAAE,CAAEC,cAAc,CAAE,KAAM,CAAE,CAAE,CAAC,cACpG1C,IAAA,QAAKW,SAAS,CAAC,gDAAgD,CAAC8B,KAAK,CAAE,CAAEC,cAAc,CAAE,OAAQ,CAAE,CAAE,CAAC,cACtG1C,IAAA,QAAKW,SAAS,CAAC,gDAAgD,CAAC8B,KAAK,CAAE,CAAEC,cAAc,CAAE,OAAQ,CAAE,CAAE,CAAC,EACnG,CAAC,cACN1C,IAAA,SAAMW,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,iCAA+B,CAAM,CAAC,EAChF,CAAC,CAEV,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}